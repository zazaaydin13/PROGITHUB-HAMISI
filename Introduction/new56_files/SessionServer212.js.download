/*
 * This code is for Internal Salesforce use only, and subject to change without notice.
 * Customers shouldn't reference this file in any web pages.
 */
this.Sfdc||(Sfdc={});
if("undefined"===typeof SfdcFramework){var SfdcFramework=function(m,b){function y(a,c,d){var e=!1;b.isArray(d)&&(e=!r(d));k[a]={pending:e,name:a,ctr:c,dependencies:d};e?b.require(d,function(){var b=k[a];b&&(b.pending=!1);v(a)}):v(a)}function v(a){if(a in l){for(var c=l[a],d=[],e,f=0;f<c.length;f++)e=s[c[f]],r(e)&&d.push(c[f]);delete l[a];a=d}else a=[];if(b.isArray(a)&&0<a.length)for(c=0;c<a.length;c++)u(a[c],s[a[c]])}function u(a,c){var d=[];b.isArray(c)||(c=[]);for(var e,f,g=0;g<c.length;g++)(e=
k[c[g]])&&!e.pending&&(f=u(e.ctr,e.dependencies)),d.push(f);return a.apply(this,d)}function r(a){b.assert(b.isArray(a),"Required ModulesList is an Array");for(var c,d=0;d<a.length;d++)if(c=a[d],b.isEmpty(c)&&b.error("A specified ModuleName must be a non empty string"),c=k[c],!c||c.pending)return!1;return!0}b||(b={});var w=m.Sizzle,n=m.document,x=[],z=0,q=Object.prototype.toString,k={},s={},l={};b.isDebug=function(){var a=n&&(n.head||n.getElementsByTagName("head")[0]);return a&&"true"===a.getAttribute("debug")}();
b.parseUserAgent=function(a){a=a||m.navigator&&m.navigator.userAgent||"";var b=-1!=a.indexOf("Chromium"),d=-1!=a.indexOf("AppleWebKit"),e=d&&-1!=a.indexOf("Chrome/"),f=d&&!e,g=-1!=a.indexOf("Firefox/"),h=-1!=a.indexOf("MSIE ")||-1!=a.indexOf("Trident/"),p=parseInt(a.split("MSIE")[1],10)||-1;h&&(-1==p&&-1!=a.indexOf("Trident/7.0"))&&(p=11);var k=-1;if(e||b)k=a.match(/Chrom(e|ium)\/([0-9]+)\./)||[],k=parseInt(k[2],10)||-1;var l=-1;g&&(l=a.match(/Firefox\/([0-9]+)\./)||[],l=parseInt(l[1],10)||-1);var n=
-1;if(-1!==a.indexOf("iPhone")||-1!==a.indexOf("iPad"))n=a.match(/\(iP.+; CPU .*OS (\d+)[_\d]*.*\) AppleWebKit\//)||[],n=parseInt(n[1],10)||-1;var q=-1!==a.indexOf("Macintosh;")||-1!==a.indexOf("Mac OS X"),r=-1,t=-1,s=!1;q&&(t=a.match(/\(Macintosh;.*Mac OS X (\d+)_(\d+)[_\d]*.*\) AppleWebKit\//)||[],r=parseInt(t[1],10)||-1,t=parseInt(t[2],10)||-1,s=!!a.match(/^Mozilla\/[\.\d]+ \(Macintosh;.*Mac OS X [_\d]+\) AppleWebKit\/[\.\d]+ \(KHTML, like Gecko\)$/));return{isIE:h,isIE11:h&&11==p,isIE10:h&&10==
p,isIE9:h&&9==p,isIE8:h&&8==p,isIE7:h&&7==p,isIE6:h&&6==p,ieVersion:p,isWebkit:d,isChrome:e,isChromeFrame:e&&"undefined"!=typeof m.externalHost,isChromium:b,chromeVersionMajor:k,isSafari:f,isSafari3:f&&-1!=a.indexOf("Version/3"),isSafariIpad:d&&-1!=a.indexOf("iPad"),isSafariIOS:f&&(-1!=a.indexOf("iPad")||-1!=a.indexOf("iPhone")),iOSVersionMajor:n,isMacOS:q,macOSVersionMajor:r,macOSVersionMinor:t,isMacEmbeddedBrowser:s,isFirefox:g,firefoxVersionMajor:l,isFirefox3:g&&-1!=a.indexOf("Firefox/3"),isOpera:-1!=
a.indexOf("Opera"),isNetscape:-1!=a.indexOf("Netscape/")}};b.userAgent=new function(){return b.parseUserAgent()};b.ns=function(){for(var a=Array.prototype.slice.call(arguments),b=null;a.length;)for(var d=(a.shift()||"").toString().split("."),b=m;d.length;){var e=d.shift();if(!e.length)break;b[e]||(b[e]={});b=b[e]}return b};b.provide=function(a,c){if(a&&c){var d=b.resolve(a);if(!d){var e=a.split("."),d=e.pop(),e=b.ns(e.join("."));c.$constructor&&(b.assert(b.Class,"Sfdc.provide(): Sfdc.Class is required when providing $constructor 'classOrFunction' notation."),
c=new b.Class(c));b.define(a,function(){return c});return e[d]=c}return d}};b.resolve=function(a,b){var d=b||m;if(void 0!=a&&a.length)for(var e=a.split(".");d&&e.length;)d=d[e.shift()];return void 0!=d?d:null};b.apply=function(a,b,d){if(d)for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);else for(var f in b)a.hasOwnProperty(f)||(a[f]=b[f]);return a};b.clone=function(a,c){c=!!c;if(!a)return a;var d=b.isArray(a),e=b.isObject(a);if(!d&&!e)return a;if(c){if(d)for(var d=[],f=0,e=a.length;f<e;f++)d.push(b.clone(a[f],
!0));else for(f in d={},a)a.hasOwnProperty(f)&&(d[f]=b.clone(a[f],!0));return d}return d?a.slice():b.apply({},a)};b.each=function(a,c,d){b.assert(b.Array,"Sfdc.each(): Sfdc.Array is required for calls to Sfdc.each().");if(b.isArray(a))return b.Array.forEach(a,c,d);if("length"in a)return b.Array.forEach(b.Array.toArray(a),c,d);b.error("You tried to iterate over an object that is not yet supported.");return null};b.onReady=function(a){b.assert(b.Dom,"Sfdc.onReady(): Sfdc.Dom is required for calls to Sfdc.onReady().");
return b.Dom.onReady(a)};b.onload=function(a){b.assert(b.Dom,"Sfdc.onload(): Sfdc.Dom is required for calls to Sfdc.onload().");return b.Dom.onload(a)};b.isArray=function(a){return void 0===a||null===a?!1:"[object Array]"===q.call(a)};b.isObject=function(a){return null!=a?"object"===typeof a&&!b.isArray(a):!1};b.isString=function(a){return"[object String]"===q.call(a)};b.isBoolean=function(a){return"[object Boolean]"===q.call(a)};b.isFunction=function(a){return"function"===typeof a};b.isNumber=function(a){return"[object Number]"===
q.call(a)};b.select=function(a,c){b.assert(w,"Sfdc.select(): There is no selection engine specified.");return w(a,c)};b.get=function(a,c){if(!b.isString(a))return a;var d=n;if(/^[>\.#\\]/.test(a))return b.first(a,c);c?d=c.getElementById?c:c.ownerDocument:c=d;d=d.getElementById(a);return null===d||d.getAttribute("id")===a?d:c.all?c.all[a]:null};b.first=function(a,c){return b.select(a,c)[0]||null};b.assert=function(a,c){if(void 0===a||null===a||!1===!!a)throw"error"in b&&b.error(c),Error(c);return a};
b.isDefAndNotNull=function(a){return void 0!==a&&null!==a};b.on=function(a,c,d,e,f){b.assert(b.Event,"Sfdc.on(): Sfdc.Event is required to use Sfdc.on().");b.assert(a,"Sfdc.on(): 'element' must be a valid Object or Node.");b.assert(c,"Sfdc.on(): 'eventName' must be a valid String.");b.Event.add(a,c,d,e,f);return b};b.un=function(a,c,d,e){b.assert(b.Event,"Sfdc.un(): Sfdc.Event is required to use Sfdc.un().");b.assert(a,"Sfdc.un(): 'element' must be a valid Object or Node.");b.assert(c,"Sfdc.un(): 'eventName' must be a valid String.");
b.Event.remove(a,c,d,e);return b};b.getConst=function(a,c){b.assert(void 0!==m[a],"That Constants group does not exist.");return m[a][c]};b.getUID=function(a){if(a.getAttribute){var c=a.getAttribute("data-uidSfdc");if(c)return c;c=b.newUID();a.setAttribute("data-uidSfdc",c);return c}return(c=a["data-uidSfdc"])?c:a["data-uidSfdc"]=b.newUID()};b.hasUID=function(a){return a?a.getAttribute?null!=a.getAttribute("data-uidSfdc"):a.hasOwnProperty?a.hasOwnProperty("data-uidSfdc"):"data-uidSfdc"in a:!1};b.newUID=
function(){return++z};b.log=function(a,b,d){void 0!==a&&x.push({msg:a,level:b,args:d});return x};b.isEmpty=function(a){if(b.isObject(a)){for(var c in a)if(a.hasOwnProperty(c))return!1;return!0}return null===a||void 0===a||""===a||b.isArray(a)&&!a.length};b.inherits=function(a,c){if(!b.isFunction(a))throw Error("Sfdc.inherit(): 'type' must be a valid Function pointer.");for(var d=c;d;){if(a===d||d instanceof a||a===d.constructor)return!0;d=d.prototype}return!1};b.implies=function(a,c,d){if(!b.isObject(a))throw Error("Sfdc.implies(): 'contract' must be a valid Object.");
if(null==c)return d&&(d.reason="Instance was undefined."),!1;var e=null,f=null,g;for(g in a){if(void 0===c[g])return d&&(d.reason=b.String.format("Instance member not implemented. Expected: '{0}{1}'.",[g,b.isFunction(a[g])?b.String.format("({0})",[b.Function.getParameters(a[g]).join(", ")]):""])),!1;if(b.isFunction(a[g])){if(b.inherits(a[g],c[g]))continue;if(b.isFunction(c[g])&&b.isDebug&&(e=b.Function.getParameters(a[g]).join(", "),f=b.Function.getParameters(c[g]).join(", "),e!=f))return d&&(d.reason=
b.String.format("Instance member signature mismatch on '{0}()'. Expected '{0}({1})', found '{0}({2})'.",[g,e,f])),!1}if(b.isObject(a[g])){if(null!==c[g]&&!b.implies(a[g],c[g],d))return d&&(d.reason=b.String.format("Instance member type mismatch on '{0}': {1}",[g,d.reason])),!1}else if(typeof a[g]!==typeof c[g])return d&&(d.reason=b.String.format("Instance member type mismatch on '{0}'. Expected '{1}', found '{2}'.",[g,typeof a[g],typeof c[g]])),!1}return!0};b.isAssignableFrom=function(a,c,d){if(void 0==
a)throw Error("Sfdc.isAssignableFrom(): 'type' must be a valid Function or Object.");if(void 0!=c)switch(typeof a){case "object":if(a.constructor!=Object&&b.inherits(a.constructor,c)||b.implies(a,c,d))return!0;break;case "function":if(b.inherits(a,c))return!0}return!1};b.define=function(a,c,d){b.assert(b.isString(a)&&0<a.length,"ModuleName is required and must be a string of length greater than 0.");b.isFunction(c)?(d=c,c=null):(b.assert(b.isFunction(d),"ModuleConstructor parameter must be a function that returns an instance of the module."),
b.assert(b.isArray(c),"Dependencies for your module must be specified as an Array."));var e=k[a];e?(c=(e.dependencies||[]).toString()===(c||[]).toString(),(e.ctr.toString()!==d.toString()||!c)&&b.error("Cannot redefine an existing module ("+a+").")):y(a,d,c)};b.require=function(a,c){b.assert(!b.isEmpty(a),"Required Modules are required");b.isArray(a)||(a=Array.prototype.slice.call(arguments),c=a.pop());b.assert(b.isFunction(c),"Callback must be a function");if(r(a))u(c,a);else{var d=c,e=a;s[d]=e;
for(var f,g,h=0;h<e.length;h++)if(f=e[h],g=k[f],!g||g.pending)!1===f in l&&(l[f]=[]),l[f].push(d)}};b.error=function(a){throw Error(a);};return b};new SfdcFramework(this,Sfdc)};
Sfdc.provide("Sfdc.Cookie",function(g){return{SAME_SITE:{NONE:"None",STRICT:"Strict",LAX:"Lax"},setCookie:function(a,c,d,b,e,f,k,h){if(h){for(var n=!1,l=Object.keys(this.SAME_SITE),m=0;m<l.length;m++)if(this.SAME_SITE[l[m]]===h){n=!0;break}if(!n){g.error(g.String.format("Setting cookie {0} with SameSite value of {1} failed. Valid values for SameSite are {2}",[a,h,l.join(",")]));return}}k=k||encodeURIComponent;document.cookie=a+"\x3d"+k(c)+(d?"; expires\x3d"+d.toGMTString():"")+(b?"; path\x3d"+b:"; path\x3d/")+
(e?"; domain\x3d"+e:"")+(!0===f?"; secure":"")+(h?"; SameSite\x3d"+h:"")},getCookie:function(a,c){c=c||decodeURIComponent;var d=document.cookie,b=a+"\x3d",e=d.indexOf("; "+b);if(-1==e){if(e=d.indexOf(b),0!==e)return null}else e+=2;var f=document.cookie.indexOf(";",e);-1==f&&(f=d.length);return c(d.substring(e+b.length,f))},deleteCookie:function(a,c,d){if(this.getCookie(a)){var b=new Date((new Date).getTime()+-1E4);this.setCookie(a,"",b,c,d)}},isSameSiteNoneSupported:function(a){var c;if(c=g.Url.isSecure()){c=
a||g.userAgent;var d=c.isMacOS,b=10===c.macOSVersionMajor&&14===c.macOSVersionMinor,e=c.isSafari,f=c.isMacEmbeddedBrowser;if(c=!(12===c.iOSVersionMajor||d&&b&&(e||f)))a=a||g.userAgent,c=a.chromeVersionMajor,c=!((a.isChrome||a.isChromium)&&51<=c&&67>=c)}return c},doesBrowserDefaultToSameSiteLax:function(a){a=a||g.userAgent;var c=a.chromeVersionMajor,d=a.isFirefox,b=a.firefoxVersionMajor;return!!((a.isChrome||a.isChromium)&&77<=c||d&&70<=b)},setCookieConsent:function(a){var c=new Date,d=new Date((new Date).getTime()+
31536E6),b=this.getCookie("CookieConsent");if(null==b){var b=this.getConsentStringFromPreferencesCookieConsent(a),e=this.getTimeStampInRequiredFormat(c);this.setCookie("CookieConsent","232.1|230.1.0|"+e+"|"+b+"|false",d,"/",null,!1,encodeURI,"");b=this.getCookie("CookieConsent")}b=this.getParsedCookieElementsCookieConsent(b);b[3]=this.getConsentStringFromPreferencesCookieConsent(a);b[2]=this.getTimeStampInRequiredFormat(c);a=this.generateCookieValueStringCookieConsent(b);this.setCookie("CookieConsent",
a,d,"/",null,!1,encodeURI,"")},getTimeStampInRequiredFormat:function(a){return a.toISOString()},getConsentStringFromPreferencesCookieConsent:function(a){var c=a.Statistics,d=a.Marketing,b="1";a.Preferences?b+="1":b+="0";c?b+="1":b+="0";d?b+="1":b+="0";return encodeURIComponent(b)},getParsedCookieElementsCookieConsent:function(a){return a.split("|")},generateCookieValueStringCookieConsent:function(a){return a.join("|")},isCategoryAllowedForCurrentConsent:function(a){if(1===Number(this.getCategoryIndex(a)))return!0;
var c=this.getCookie("CookieConsentPolicy");if(null==c)return!0;var d=this.getCookie("CookieConsent"),c=c.split(":"),b=Boolean(Number(c[1]));return Boolean(Number(c[0]))?b?null===d?1===Number(getCategoryIndex(a))?!0:!1:getConsentFromCookieConsentValue(d,a):!1:!0},getConsentFromCookieConsentValue:function(a,c){var d=this.getParsedCookieElementsCookieConsent(a);if(null==d[3])return!1;var d=d[3],b=Number(this.getCategoryIndex(c));return 1==Number(d.charAt(b-1))?!0:!1},getCategoryIndex:function(a){switch(a.toLowerCase()){case "essential":return"1";
case "preferences":return"2";case "statistics":return"3";case "marketing":return"4";default:return"-1"}}}}(Sfdc));
Sfdc.provide("Sfdc.JSON",function(g){function k(a,b,f){if(g.isArray(a)){for(var c=f||[],e=0;e<a.length;e++)c.push(k(a[e],b));return c}if(g.isObject(a)){c=a.serId;if(void 0!==c)return a=a.value,e=g.isArray(a)?[]:{},b[c]=e,k(a,b,e);c=a.serRefId;if(void 0!==c)return b[c];c=f||{};for(e in a)a.hasOwnProperty(e)&&(c[e]=k(a[e],b));return c}return a}function m(a,b){var f=null,c=!1;if("string"!==typeof a||g.isEmpty(a))return f;if("undefined"!==typeof JSON&&JSON.parse)try{f=JSON.parse(a),c=!0}catch(e){}if(!c)try{f=
q(a)}catch(d){f=null}f&&b&&(f=k(f,{}));return f}var q=function(){var a,b,f={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},c,e=function(b){throw{name:"SyntaxError",message:b,at:a,text:c};},d=function(p){p&&p!==b&&e("Expected '"+p+"' instead of '"+b+"'");b=c.charAt(a);a+=1;return b},g=function(){var a;a="";"-"===b&&(a="-",d("-"));for(;"0"<=b&&"9">=b;)a+=b,d();if("."===b)for(a+=".";d()&&"0"<=b&&"9">=b;)a+=b;if("e"===b||"E"===b){a+=b;d();if("-"===b||"+"===b)a+=b,d();for(;"0"<=b&&"9">=
b;)a+=b,d()}a=+a;if(isFinite(a))return a;e("Bad number")},k=function(){var a,c,l="",g;if('"'===b)for(;d();){if('"'===b)return d(),l;if("\\"===b)if(d(),"u"===b){for(c=g=0;4>c;c+=1){a=parseInt(d(),16);if(!isFinite(a))break;g=16*g+a}l+=String.fromCharCode(g)}else if("string"===typeof f[b])l+=f[b];else break;else l+=b}e("Bad string")},h=function(){for(;b&&" ">=b;)d()},m=function(){switch(b){case "t":return d("t"),d("r"),d("u"),d("e"),!0;case "f":return d("f"),d("a"),d("l"),d("s"),d("e"),!1;case "n":return d("n"),
d("u"),d("l"),d("l"),null}e("Unexpected '"+b+"'")},n;n=function(){h();switch(b){case "{":var a;a:{var c={};if("{"===b){d("{");h();if("}"===b){d("}");a=c;break a}for(;b;){a=k();h();d(":");Object.hasOwnProperty.call(c,a)&&e('Duplicate key "'+a+'"');c[a]=n();h();if("}"===b){d("}");a=c;break a}d(",");h()}}e("Bad object");a=void 0}return a;case "[":a:{a=[];if("["===b){d("[");h();if("]"===b){d("]");break a}for(;b;){a.push(n());h();if("]"===b){d("]");break a}d(",");h()}}e("Bad array");a=void 0}return a;
case '"':return k();case "-":return g();default:return"0"<=b&&"9">=b?g():m()}};return function(d,f){var g;c=d;a=0;b=" ";g=n();h();b&&e("Syntax error");return"function"===typeof f?function r(a,b){var c,d,e=a[b];if(e&&"object"===typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=r(e,c),void 0!==d?e[c]=d:delete e[c]);return f.call(a,b,e)}({"":g},""):g}}();return{parseSafe:function(a,b){return m(a,b)},parse:function(a,b){return m(a,b)},parseWithCSRF:function(a,b){if(!g.isString(a))return null;
var f;a:{f=["while(1);\n","while(1);\n".replace("\n","")];for(var c=0,e=f.length;c<e;c++){var d=f[c];if(0===a.indexOf(d)){f=a.slice(d.length);break a}}g.assert(!1,"CSRF protect string not added to servlet response.");f=void 0}return m(f,b)},stringify:function(a,b,f){if("undefined"!==typeof JSON&&JSON.stringify){if(Array.prototype.toJSON){var c=Array.prototype,e=c.toJSON;delete c.toJSON;var d=JSON.stringify(a,b,f);c.toJSON=e;return d}return JSON.stringify(a,b,f)}if(void 0===a)return"";if(null===a)return"null";
switch(a.constructor){case String:return'"'+a.replace(/\\/g,"\\\\").replace(/\"/g,'\\"').replace(/\r|\n|\f/g,"\\n")+'"';case Array:c=[];for(e=0;e<a.length;e++)c.push(arguments.callee(a[e]));return"["+c.join(",")+"]";case Object:c=[];for(e in a)a.hasOwnProperty(e)&&("undefined"!==typeof a[e]&&"function"!==typeof a[e])&&c.push(arguments.callee(e)+":"+arguments.callee(a[e]));return"{"+c.join(",")+"}";default:return a.toString()}}}}(Sfdc));
Sfdc.provide("Sfdc.Url",function(f){function n(){m||(m=document.createElement("a"));return m}var m;return{getHash:function(a){a=a||window;return a.location.hash.substring(1)},setHash:function(a,b){if("undefined"==typeof a||""===a)return!1;b=b||window;b.location.hash=a;return!0},generateQueryString:function(a,b,d){var h=[],c={},k=null;d=f.apply(d||{},{includeMark:!0,escape:encodeURIComponent,fullUrl:!1,allowMultipleOfParam:!1},!1);var c=a.split("?"),g=c[0],c=1<c.length?c[1]:"";if(!b)return d.fullUrl?
a:c;1<c.length?(a=c.split("#"),1<a.length&&(c=a[0])):(a=g.split("#"),1<a.length&&(g=a[0]));c=this.getUrlParameters(c,d);if(d.allowMultipleOfParam)for(var e in b)c.hasOwnProperty(e)?f.isArray(c[e])?c[e].push(b[e]):c[e]=[c[e],b[e]]:c[e]=b[e];else c=f.apply(c,b,!0);for(var l in c)if(c.hasOwnProperty(l)&&(k=c[l],f.isDefAndNotNull(k)))if(d.allowMultipleOfParam&&f.isArray(k)){b=0;for(e=k.length;b<e;b++)h.push(l+"\x3d"+d.escape(k[b]))}else h.push(l+"\x3d"+d.escape(k));retval=d.fullUrl?g+"?":d.includeMark?
"?":"";return 1<a.length?(a.shift(),retval+h.join("\x26")+"#"+a.join("#")):retval+h.join("\x26")},generateUrl:function(a,b,d){d=f.apply(d||{},{fullUrl:!0},!0);return this.generateQueryString(a,b,d)},getHostFromUrl:function(a){if(!f.isString(a))return"";var b=n();b.href=a;return(a=(a.match(/https?:\/\//i)?a:window.location.href).match(/:(\d+)/g))?(b.hostname||window.location.hostname)+a[0]:b.hostname||window.location.hostname},getUrlParameters:function(a,b){if(!a)return{};-1<a.indexOf("?")&&(a=a.split("?")[1]);
var d={};b=f.apply(b||{},{unescape:decodeURIComponent,allowMultipleOfParam:!1});for(var h=a.split("\x26"),c=0,k=h.length,g=null,e;c<k;c++)f.isEmpty(h[c])||(g=h[c].split("\x3d"),e=g[0],g=b.unescape(g[1]),b.allowMultipleOfParam&&f.isDefAndNotNull(d[e])?f.isArray(d[e])?d[e].push(g):d[e]=[d[e],g]:d[e]=g);return d},navigateTo:function(a,b){b=b||window;/^#/.test(a)?this.setHash(a,b):b.navigateTo?b.navigateTo(a):b.location.href=a},resolveUrl:function(a){return f.UserContext&&f.UserContext.getUrl?f.UserContext.getUrl(a):
a},stripDomainFromUrl:function(a){if(!f.isString(a)||!a.length)return"";var b=n();b.href=a;a=b.pathname;return!/^\//gi.test(a)?"/"+a:a},isSecure:function(a){a=a||window;return"https:"===a.location.protocol}}}(Sfdc));
(function(){function h(c,a,b){c&&"number"==typeof c.id&&l.console&&l.console.log&&(l.console.apply?l.console.log(c.cmd+" Error: "+a):Function.prototype.bind.call(l.console.log,l.console).apply(l.console,[c.cmd," Error: ",a]))}function p(c,a,b,d,e){var f=g.getItem(c),f=f?Sfdc.JSON.parse(f):null;if(null===f)return null;f.activeonly&&("sfdcsession::inactive"==b||!f.retainhint)?g.removeItem(c):(f.active=!1,f.lastused=Date.now(),a&&(f.expire=Date.now()),f.identity&&(void 0!==e&&null!==e)&&(f.identity.ll=
e),g.setItem(c,Sfdc.JSON.stringify(f)));return{cmd:b,id:d,msgtype:"SfdcSession"}}function r(c,a){var b=RegExp(w);if(c.match(b))return!1;b=RegExp(x);if(c.match(b)){b=s(c,a);if(null===b)return!1;var d=b.indexOf("/secur/contentDoor");return 0<d?"/secur/contentDoor"===b.substring(d):"/secur/contentDoor"===b}return!0}function s(c,a){var b=document.referrer;if(void 0===b||null===b||""===b)return h(a,"Empty parent page",c),null;b=b.split("?")[0].split("://")[1];return void 0===b||null===b||""===b||-1===
b.indexOf("/")?(h(a,"Invalid parent page",c),null):b=b.substr(b.indexOf("/"))}function t(c){var a=c.origin.split("://")[1].split(":")[0],b=l.location.href.split("://")[1].split(":")[0].split("/")[0],d=!1;if(a===b)d=!0;else for(b=0;b<u.length;b++)if(a.match(RegExp(u[b]))){d=!0;break}if(d&&(d=Sfdc.JSON.parse(c.data))&&!("object"!=typeof d||!d.cmd||void 0===d.id||"1"===g.getItem("sfdcsession.disabled"))&&v[d.cmd])a=v[d.cmd](a,d),c=c.origin,a&&"number"==typeof a.id&&l.parent.postMessage(Sfdc.JSON.stringify(a),
c)}function q(c,a){return String.prototype.endsWith?c.endsWith(a):-1!==c.indexOf(a,c.length-a.length)}var u=["^[^/?]+\\.(sales)?force\\.com$","^[^/?]+\\.database\\.com$","^[^/?]+\\.cloudforce\\.com$","^[^/?]+\\.documentforce\\.com$"],x="^[^/?]+\\.content((.localhost)?\\.soma|\\.t|\\.stmf[abc].stm)?\\.force\\.com|\\.documentforce\\.com$",w="^[^/?]+\\.visual((\\.localhost)?\\.soma|\\.t|\\.stmf[abc].stm)?\\.force\\.com$";Date.now=Date.now||function(){return+new Date};var l=window;if(l.top!==l){try{if(!l.postMessage||
!l.localStorage)return}catch(z){return}var g=l.localStorage,m=null,n=document.cookie.match(/(?:^|;)\s*session=(\d+)(?:;|$)/);n&&n.length&&(m=n[1]);if(!m){var m=(new Date).getTime(),n=Sfdc.Url.isSecure(),y=Sfdc.Cookie.doesBrowserDefaultToSameSiteLax();Sfdc.Cookie.setCookie("session",m,null,null,null,n,null,n&&y?Sfdc.Cookie.SAME_SITE.NONE:null)}var v={"sfdcsession::setIdentity":function(c,a){var b;b=s(c,a);if(null===b)b=!1;else{var d;if(d=!q(b,"/secur/frontdoor.jsp"))d=void 0,String.prototype.startsWith?
d=b.startsWith("/identity/qa/loginhint/"):(d=d||0,d=b.indexOf("/identity/qa/loginhint/",d)===d),d=!d&&!q(b,"/secur/contentDoor")&&!q(b,"/login")&&!q(b,"/home/home.jsp")&&"/"!==b;d?(h(a,"Invalid path to set identity",c),b=!1):b=!0}if(!b)return null;if(!r(c,a))return h(a,"Invalid domain to set identity",c),null;if(!a.uid)return h(a,"No uid",c),null;if(!a.oid)return h(a,"No oid",c),null;if(!a.identity)return h(a,"No identity",c),null;if(a.identity.instance)if((b=a.identity.instance)&&6<b.length){if(b=
b.substring(0,6),!("http:/"===b||"https:"===b))return h(a,"Bad instance URL",c),null}else return h(a,"Short instance URL",c),null;else return h(a,"No instance URL",c),null;a.expire=Number(a.expire);if(new Date(a.expire)<new Date)return h(a,"Invalid Expiration",c),null;b={identity:a.identity,expire:a.expire,active:a.active,lastused:Date.now(),mydomain:a.mydomain,community:a.community,activeonly:a.activeonly,retainhint:a.retainhint};!0===a.session&&(b.session=m);d=a.oid+a.uid;for(var e=g.length-1;0<=
e;e--){var f=g.key(e);if(f==d){if(f=(f=g.getItem(d))?Sfdc.JSON.parse(f):null){var k=f.block;k&&(b.block=k);if(f=f.identity.display)b.identity.display=f}}else if("00D"===f.substring(0,3)&&"005"===f.substring(15,18)&&(k=(k=g.getItem(f))?Sfdc.JSON.parse(k):null)&&k.identity&&k.identity.instance===b.identity.instance)k.activeonly&&!k.retainhint?g.removeItem(f):(k.expire=Date.now(),k.active=!1,g.setItem(f,Sfdc.JSON.stringify(k)))}b.activeonly&&!b.active&&!b.retainhint?g.removeItem(d):g.setItem(d,Sfdc.JSON.stringify(b));
return{cmd:a.cmd,id:a.id,msgtype:"SfdcSession"}},"sfdcsession::getIdentities":function(c,a){if(!r(c,a))return h(a,"Invalid domain to get identity",c),null;var b={},d=0,e=null,f=e=null;if(!a.get||!a.get.length)for(d=g.length-1;0<=d;d--){var k=g.key(d);if("00D"===k.substring(0,3)&&"005"===k.substring(15,18)&&(e=(e=g.getItem(k))?Sfdc.JSON.parse(e):null)&&!e.block){if(e.active){f=new Date(e.expire);if(f<new Date&&(p(k,!0,a.cmd,a.id,null),e.active=!1,e.activeonly&&!e.retainhint)){g.removeItem(k);continue}e.session&&
e.session!=m&&(p(k,!0,a.cmd,a.id,null),e.active=!1)}else if(e.activeonly&&!e.retainhint){g.removeItem(k);continue}b[k]={identity:e.identity,expire:e.expire,active:e.active,mydomain:e.mydomain,community:e.community,lastused:e.lastused}}}else for(d=a.get.length-1;0<=d;d--){var l=a.get[d];if((e=(e=g.getItem(l))?Sfdc.JSON.parse(e):null)&&!e.block){if(e.active){f=new Date(e.expire);if(f<new Date&&(p(k,!0,a.cmd,a.id,null),e.active=!1,e.activeonly&&!e.retainhint)){g.removeItem(k);continue}e.session&&e.session!=
m&&(p(k,!0,a.cmd,a.id,null),e.active=!1)}else if(e.activeonly&&!e.retainhint){g.removeItem(l);continue}b[l]={identity:e.identity,expire:e.expire,active:e.active,mydomain:e.mydomain,community:e.community,lastused:e.lastused}}}return{cmd:a.cmd,id:a.id,identities:b,msgtype:"SfdcSession"}},"sfdcsession::changeDisplay":function(c,a){if(!a.uid)return h(a,"No uid",c),null;if(!a.oid)return h(a,"No oid",c),null;var b=g.getItem(a.oid+a.uid),b=b?Sfdc.JSON.parse(b):null;if(null===b)return null;var d=a.display;
b.identity.display=d&&100<d.length?d.substring(0,100):d;g.setItem(a.oid+a.uid,Sfdc.JSON.stringify(b));return{cmd:a.cmd,id:a.id,msgtype:"SfdcSession"}},"sfdcsession::inactive":function(c,a){return!a.uid?(h(a,"No uid",c),null):!a.oid?(h(a,"No oid",c),null):p(a.oid+a.uid,a.upexp,a.cmd,a.id,a.ll)},"sfdcsession::active":function(c,a){if(!a.uid)return h(a,"No uid",c),null;if(!a.oid)return h(a,"No oid",c),null;var b=g.getItem(a.oid+a.uid),b=b?Sfdc.JSON.parse(b):null;if(null===b)return null;b.active=!0;b.lastused=
Date.now();g.setItem(a.oid+a.uid,Sfdc.JSON.stringify(b));return{cmd:a.cmd,id:a.id,msgtype:"SfdcSession"}},"sfdcsession::updateexpires":function(c,a){if(!a.uid)return h(a,"No uid",c),null;if(!a.oid)return h(a,"No oid",c),null;var b=g.getItem(a.oid+a.uid),b=b?Sfdc.JSON.parse(b):null;null!==b&&(b.lastused=Date.now(),b.expire=a.expire,g.setItem(a.oid+a.uid,Sfdc.JSON.stringify(b)));return{cmd:a.cmd,id:a.id,msgtype:"SfdcSession"}},"sfdcsession::updateandactivate":function(c,a){if(!a.uid)return h(a,"No uid",
c),null;if(!a.oid)return h(a,"No oid",c),null;if(!a.instance)return h(a,"No instance",c),null;for(var b=a.oid+a.uid,d=0;d<g.length;d++){var e=g.key(d);if(e!=b&&"00D"===e.substring(0,3)&&"005"===e.substring(15,18)){var f=g.getItem(e);if((f=f?Sfdc.JSON.parse(f):null)&&f.identity&&f.identity.instance===a.instance)f.activeonly&&!f.retainhint?g.removeItem(e):(f.expire=Date.now(),f.active=!1,g.setItem(e,Sfdc.JSON.stringify(f)))}}d=(d=g.getItem(b))?Sfdc.JSON.parse(d):null;null!==d&&(d.lastused=Date.now(),
d.expire=a.expire,d.active=!0,!0===a.session&&(d.session=m),g.setItem(b,Sfdc.JSON.stringify(d)));return{cmd:a.cmd,id:a.id,msgtype:"SfdcSession"}},"sfdcsession::updatelastused":function(c,a){if(!a.uid)return h(a,"No uid",c),null;if(!a.oid)return h(a,"No oid",c),null;var b=g.getItem(a.oid+a.uid),b=b?Sfdc.JSON.parse(b):null;if(null===b)return null;b.lastused=Date.now();g.setItem(a.oid+a.uid,Sfdc.JSON.stringify(b));return{cmd:a.cmd,id:a.id,msgtype:"SfdcSession"}},"sfdcsession::deleteIdentity":function(c,
a){if(!r(c,a))return h(a,"Invalid domain to delete identity",c),null;if(!a.uid)return h(a,"No uid",c),null;if(!a.oid)return h(a,"No oid",c),null;g.removeItem(a.oid+a.uid);return{cmd:a.cmd,id:a.id,msgtype:"SfdcSession"}}};l.addEventListener?l.addEventListener("message",t,!1):l.attachEvent&&l.attachEvent("onmessage",t);l.parent.postMessage(Sfdc.JSON.stringify({cmd:"sfdcsession::ready",msgtype:"SfdcSession"}),"*")}})();

//# sourceMappingURL=/javascript/1632358686000/sfdc/source/SessionServer212.js.map
